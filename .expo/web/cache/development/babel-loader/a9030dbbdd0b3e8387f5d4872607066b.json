{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/alex/workspace/papamama/node_modules/react-native-render-html/src/HTML.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ViewPropTypes from \"react-native-web/dist/exports/ViewPropTypes\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { cssStringToRNStyle, _getElementClassStyles, cssStringToObject, cssObjectToString, computeTextStyles } from \"./HTMLStyles\";\nimport { BLOCK_TAGS, TEXT_TAGS, MIXED_TAGS, IGNORED_TAGS, TEXT_TAGS_IGNORING_ASSOCIATION, STYLESETS, TextOnlyPropTypes, PREFORMATTED_TAGS } from \"./HTMLUtils\";\nimport { generateDefaultBlockStyles, generateDefaultTextStyles } from \"./HTMLDefaultStyles\";\nimport { DomHandler, Parser } from 'htmlparser2';\nimport * as HTMLRenderers from \"./HTMLRenderers\";\n\nvar HTML = function (_PureComponent) {\n  _inherits(HTML, _PureComponent);\n\n  var _super = _createSuper(HTML);\n\n  function HTML(props) {\n    var _this;\n\n    _classCallCheck(this, HTML);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    _this.renderers = _objectSpread(_objectSpread({}, HTMLRenderers), _this.props.renderers || {});\n\n    _this.generateDefaultStyles(props.baseFontStyle);\n\n    return _this;\n  }\n\n  _createClass(HTML, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.registerDOM();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var html = prevProps.html,\n          uri = prevProps.uri,\n          renderers = prevProps.renderers;\n      var doParseDOM = false;\n      this.generateDefaultStyles(this.props.baseFontStyle);\n\n      if (renderers !== this.props.renderers) {\n        this.renderers = _objectSpread(_objectSpread({}, HTMLRenderers), this.props.renderers || {});\n      }\n\n      if (html !== this.props.html || uri !== this.props.uri) {\n        this.registerDOM(this.props);\n      }\n\n      if (this.state.dom !== prevState.dom) {\n        this.parseDOM(this.state.dom, this.props);\n      }\n    }\n  }, {\n    key: \"registerDOM\",\n    value: function registerDOM() {\n      var props,\n          cb,\n          html,\n          uri,\n          response,\n          _args = arguments;\n      return _regeneratorRuntime.async(function registerDOM$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              props = _args.length > 0 && _args[0] !== undefined ? _args[0] : this.props;\n              cb = _args.length > 1 ? _args[1] : undefined;\n              html = props.html, uri = props.uri;\n\n              if (!html) {\n                _context.next = 7;\n                break;\n              }\n\n              this.setState({\n                dom: html,\n                loadingRemoteURL: false,\n                errorLoadingRemoteURL: false\n              });\n              _context.next = 30;\n              break;\n\n            case 7:\n              if (!props.uri) {\n                _context.next = 29;\n                break;\n              }\n\n              _context.prev = 8;\n              _context.prev = 9;\n              this.setState({\n                loadingRemoteURL: true,\n                errorLoadingRemoteURL: false\n              });\n              _context.next = 13;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 13:\n              response = _context.sent;\n              this.setState({\n                dom: response._bodyText,\n                loadingRemoteURL: false\n              });\n              _context.next = 21;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](9);\n              console.warn(_context.t0);\n              this.setState({\n                errorLoadingRemoteURL: true,\n                loadingRemoteURL: false\n              });\n\n            case 21:\n              _context.next = 27;\n              break;\n\n            case 23:\n              _context.prev = 23;\n              _context.t1 = _context[\"catch\"](8);\n              console.warn('react-native-render-html', \"Couldn't fetch remote HTML from uri : \" + uri);\n              return _context.abrupt(\"return\", false);\n\n            case 27:\n              _context.next = 30;\n              break;\n\n            case 29:\n              console.warn('react-native-render-html', 'Please provide the html or uri prop.');\n\n            case 30:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, [[8, 23], [9, 17]], Promise);\n    }\n  }, {\n    key: \"parseDOM\",\n    value: function parseDOM(dom) {\n      var _this2 = this;\n\n      var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.props;\n      var _this$props = this.props,\n          decodeEntities = _this$props.decodeEntities,\n          debug = _this$props.debug,\n          onParsed = _this$props.onParsed;\n      var parser = new Parser(new DomHandler(function (_err, dom) {\n        var RNElements = _this2.mapDOMNodesTORNElements(dom, false, props);\n\n        if (onParsed) {\n          var alteredRNElements = onParsed(dom, RNElements);\n\n          if (alteredRNElements) {\n            RNElements = alteredRNElements;\n          }\n        }\n\n        _this2.setState({\n          RNNodes: _this2.renderRNElements(RNElements, 'root', 0, props)\n        });\n\n        if (debug) {\n          console.log('DOMNodes from htmlparser2', dom);\n          console.log('RNElements from render-html', RNElements);\n        }\n      }), {\n        decodeEntities: decodeEntities\n      });\n      parser.write(dom);\n      parser.done();\n    }\n  }, {\n    key: \"generateDefaultStyles\",\n    value: function generateDefaultStyles() {\n      var baseFontStyle = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.props.baseFontStyle;\n      this.defaultBlockStyles = generateDefaultBlockStyles(baseFontStyle.fontSize || 14);\n      this.defaultTextStyles = generateDefaultTextStyles(baseFontStyle.fontSize || 14);\n    }\n  }, {\n    key: \"childrenNeedAView\",\n    value: function childrenNeedAView(children) {\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].wrapper === 'View') {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"wrapperHasTextChild\",\n    value: function wrapperHasTextChild(children) {\n      for (var i = 0; i < children.length; i++) {\n        if (children[i].wrapper === 'Text') {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"associateRawTexts\",\n    value: function associateRawTexts(children) {\n      for (var i = 0; i < children.length; i++) {\n        var child = children[i];\n\n        if (child.wrapper === 'Text' && TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.tagName) === -1 && children.length > 1 && (!child.parent || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.parent.name) === -1)) {\n          var wrappedTexts = [];\n\n          for (var j = i; j < children.length; j++) {\n            var nextSibling = children[j];\n\n            if (nextSibling.wrapper !== 'Text' || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(nextSibling.tagName) !== -1) {\n              break;\n            }\n\n            wrappedTexts.push(nextSibling);\n            children[j] = false;\n          }\n\n          if (wrappedTexts.length) {\n            children[i] = {\n              attribs: {},\n              children: wrappedTexts,\n              nodeIndex: i,\n              parent: child.parent,\n              parentTag: child.parentTag,\n              tagName: 'textwrapper',\n              wrapper: 'Text'\n            };\n          }\n        }\n      }\n\n      return children.filter(function (parsedNode) {\n        return parsedNode !== false && parsedNode !== undefined;\n      });\n    }\n  }, {\n    key: \"mapDOMNodesTORNElements\",\n    value: function mapDOMNodesTORNElements(DOMNodes) {\n      var _this3 = this;\n\n      var parentTag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.props;\n      var ignoreNodesFunction = props.ignoreNodesFunction,\n          ignoredTags = props.ignoredTags,\n          alterNode = props.alterNode,\n          alterData = props.alterData,\n          alterChildren = props.alterChildren,\n          tagsStyles = props.tagsStyles,\n          classesStyles = props.classesStyles;\n      var RNElements = DOMNodes.map(function (node, nodeIndex) {\n        var _node = node,\n            children = _node.children,\n            data = _node.data;\n\n        if (ignoreNodesFunction && ignoreNodesFunction(node, parentTag) === true) {\n          return false;\n        }\n\n        if (ignoredTags.map(function (tag) {\n          return tag.toLowerCase();\n        }).indexOf(node.name && node.name.toLowerCase()) !== -1) {\n          return false;\n        }\n\n        if (alterNode) {\n          var alteredNode = alterNode(node);\n          node = alteredNode || node;\n        }\n\n        var _node2 = node,\n            type = _node2.type,\n            attribs = _node2.attribs,\n            name = _node2.name,\n            parent = _node2.parent;\n\n        if (alterData && data) {\n          var alteredData = alterData(node);\n          data = alteredData || data;\n        }\n\n        if (alterChildren && children) {\n          var alteredChildren = alterChildren(node);\n          children = alteredChildren || children;\n        }\n\n        var strippedData = data && data.replace(/\\s/g, '');\n\n        if (type === 'text') {\n          if (!strippedData || !strippedData.length) {\n            return false;\n          }\n\n          if (node.parent && node.parent.name && PREFORMATTED_TAGS.indexOf(node.parent.name) === -1) {\n            data = data.replace(/(\\r\\n|\\n|\\r)/gm, '');\n          }\n\n          return {\n            wrapper: 'Text',\n            data: data,\n            attribs: attribs || {},\n            parent: parent,\n            parentTag: parent && parent.name,\n            tagName: name || 'rawtext'\n          };\n        }\n\n        if (type === 'tag') {\n          if (children) {\n            children = _this3.associateRawTexts(_this3.mapDOMNodesTORNElements(children, name));\n          }\n\n          if (_this3.childrenNeedAView(children) || BLOCK_TAGS.indexOf(name.toLowerCase()) !== -1) {\n            return {\n              wrapper: 'View',\n              children: children,\n              attribs: attribs,\n              parent: parent,\n              tagName: name,\n              parentTag: parentTag\n            };\n          } else if (TEXT_TAGS.indexOf(name.toLowerCase()) !== -1 || MIXED_TAGS.indexOf(name.toLowerCase()) !== -1) {\n            return {\n              wrapper: 'Text',\n              children: children,\n              attribs: attribs,\n              parent: parent,\n              tagName: name,\n              parentTag: parentTag\n            };\n          } else if (_this3.renderers[name] && _this3.renderers[name].wrapper) {\n            return {\n              wrapper: _this3.renderers[name].wrapper,\n              children: children,\n              attribs: attribs,\n              parent: parent,\n              tagName: name,\n              parentTag: parentTag\n            };\n          }\n\n          return {\n            wrapper: 'View',\n            children: children,\n            attribs: attribs,\n            parent: parent,\n            tagName: name,\n            parentTag: parentTag\n          };\n        }\n      }).filter(function (parsedNode) {\n        return parsedNode !== false && parsedNode !== undefined;\n      }).map(function (parsedNode, nodeIndex) {\n        var wrapper = parsedNode.wrapper,\n            children = parsedNode.children,\n            attribs = parsedNode.attribs,\n            tagName = parsedNode.tagName;\n        var firstChild = children && children[0];\n\n        if (firstChild && children.length === 1) {\n          if ((attribs === firstChild.attribs || !firstChild.attribs) && firstChild.wrapper === wrapper && (tagName === firstChild.tagName || firstChild.tagName === 'rawtext')) {\n            return _objectSpread(_objectSpread({}, parsedNode), {}, {\n              attribs: _objectSpread(_objectSpread({}, attribs), firstChild.attribs),\n              data: firstChild.data,\n              children: [],\n              tagName: tagName,\n              nodeIndex: nodeIndex\n            });\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, parsedNode), {}, {\n          nodeIndex: nodeIndex\n        });\n      }).map(function (parsedNode, nodeIndex) {\n        var wrapper = parsedNode.wrapper,\n            attribs = parsedNode.attribs,\n            tagName = parsedNode.tagName,\n            children = parsedNode.children;\n\n        if (wrapper === 'View' && attribs && _this3.wrapperHasTextChild(children)) {\n          var wrapperStyles = _objectSpread(_objectSpread(_objectSpread({}, tagsStyles[tagName] || {}), _getElementClassStyles(attribs, classesStyles)), cssStringToObject(attribs.style || ''));\n\n          var textChildrenInheritedStyles = {};\n          Object.keys(wrapperStyles).forEach(function (styleKey) {\n            if (TextOnlyPropTypes.indexOf(styleKey) !== -1) {\n              textChildrenInheritedStyles[styleKey] = wrapperStyles[styleKey];\n              delete wrapperStyles[styleKey];\n            }\n          });\n\n          if (Object.keys(textChildrenInheritedStyles).length === 0) {\n            return parsedNode;\n          }\n\n          parsedNode.attribs.style = cssObjectToString(wrapperStyles);\n\n          for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            var _wrapper = child.wrapper,\n                _attribs = child.attribs;\n\n            if (_wrapper === 'Text') {\n              if (!_attribs.style) {\n                child.attribs.style = cssObjectToString(textChildrenInheritedStyles);\n              } else {\n                child.attribs.style = cssObjectToString(_objectSpread(_objectSpread({}, textChildrenInheritedStyles), cssStringToObject(child.attribs.style)));\n              }\n            }\n          }\n        }\n\n        return parsedNode;\n      });\n      return this.associateRawTexts(RNElements);\n    }\n  }, {\n    key: \"renderRNElements\",\n    value: function renderRNElements(RNElements) {\n      var _this4 = this;\n\n      var parentWrapper = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'root';\n      var parentIndex = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var props = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : this.props;\n      var allowFontScaling = props.allowFontScaling,\n          allowedStyles = props.allowedStyles,\n          baseFontStyle = props.baseFontStyle,\n          classesStyles = props.classesStyles,\n          emSize = props.emSize,\n          ignoredStyles = props.ignoredStyles,\n          ptSize = props.ptSize,\n          tagsStyles = props.tagsStyles,\n          textSelectable = props.textSelectable;\n      return RNElements && RNElements.length ? RNElements.map(function (element, index) {\n        var attribs = element.attribs,\n            data = element.data,\n            tagName = element.tagName,\n            parentTag = element.parentTag,\n            children = element.children,\n            nodeIndex = element.nodeIndex,\n            wrapper = element.wrapper;\n        var Wrapper = wrapper === 'Text' ? Text : View;\n        var key = wrapper + \"-\" + parentIndex + \"-\" + nodeIndex + \"-\" + tagName + \"-\" + index + \"-\" + parentTag;\n        var convertedCSSStyles = attribs && attribs.style ? cssStringToRNStyle(attribs.style, Wrapper === Text ? STYLESETS.TEXT : STYLESETS.VIEW, {\n          parentTag: tagName,\n          emSize: emSize,\n          ptSize: ptSize,\n          ignoredStyles: ignoredStyles,\n          allowedStyles: allowedStyles\n        }) : {};\n        var childElements = children && children.length ? children.map(function (child, childIndex) {\n          return _this4.renderRNElements([child], wrapper, index, props);\n        }) : false;\n\n        if (_this4.renderers[tagName]) {\n          var customRenderer = typeof _this4.renderers[tagName] === 'function' ? _this4.renderers[tagName] : _this4.renderers[tagName].renderer;\n\n          if (!customRenderer || typeof customRenderer !== 'function') {\n            console.warn(\"Custom renderer for \" + tagName + \" supplied incorrectly. Please check out the docs.\");\n            return undefined;\n          }\n\n          return customRenderer(attribs, childElements, convertedCSSStyles, _objectSpread(_objectSpread({}, props), {}, {\n            parentWrapper: wrapper,\n            parentTag: parentTag,\n            nodeIndex: nodeIndex,\n            parentIndex: parentIndex,\n            key: key,\n            data: data,\n            rawChildren: children\n          }));\n        }\n\n        var classStyles = _getElementClassStyles(attribs, classesStyles);\n\n        var textElement = data ? React.createElement(Text, {\n          allowFontScaling: allowFontScaling,\n          style: computeTextStyles(element, {\n            defaultTextStyles: _this4.defaultTextStyles,\n            tagsStyles: tagsStyles,\n            classesStyles: classesStyles,\n            baseFontStyle: baseFontStyle,\n            emSize: emSize,\n            ptSize: ptSize,\n            ignoredStyles: ignoredStyles,\n            allowedStyles: allowedStyles\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 17\n          }\n        }, data) : false;\n        var style = [!tagsStyles || !tagsStyles[tagName] ? (Wrapper === Text ? _this4.defaultTextStyles : _this4.defaultBlockStyles)[tagName] : undefined, tagsStyles ? tagsStyles[tagName] : undefined, classStyles, convertedCSSStyles].filter(function (s) {\n          return s !== undefined;\n        });\n        var renderersProps = {};\n\n        if (Wrapper === Text) {\n          renderersProps.allowFontScaling = allowFontScaling;\n          renderersProps.selectable = textSelectable;\n        }\n\n        return React.createElement(Wrapper, _extends({\n          key: key,\n          style: style\n        }, renderersProps, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 17\n          }\n        }), textElement, childElements);\n      }) : false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          allowFontScaling = _this$props2.allowFontScaling,\n          customWrapper = _this$props2.customWrapper,\n          remoteLoadingView = _this$props2.remoteLoadingView,\n          remoteErrorView = _this$props2.remoteErrorView;\n      var _this$state = this.state,\n          RNNodes = _this$state.RNNodes,\n          loadingRemoteURL = _this$state.loadingRemoteURL,\n          errorLoadingRemoteURL = _this$state.errorLoadingRemoteURL;\n\n      if (!RNNodes && !loadingRemoteURL && !errorLoadingRemoteURL) {\n        return null;\n      } else if (loadingRemoteURL) {\n        return remoteLoadingView ? remoteLoadingView(this.props, this.state) : React.createElement(View, {\n          style: {\n            flex: 1,\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 21\n          }\n        }, React.createElement(ActivityIndicator, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 25\n          }\n        }));\n      } else if (errorLoadingRemoteURL) {\n        return remoteErrorView ? remoteErrorView(this.props, this.state) : React.createElement(View, {\n          style: {\n            flex: 1,\n            alignItems: 'center'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 21\n          }\n        }, React.createElement(Text, {\n          allowFontScaling: allowFontScaling,\n          style: {\n            fontStyle: 'italic',\n            fontSize: 16\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 25\n          }\n        }, \"Could not load \", this.props.uri));\n      }\n\n      return customWrapper ? customWrapper(RNNodes) : React.createElement(View, {\n        style: this.props.containerStyle || {},\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 13\n        }\n      }, RNNodes);\n    }\n  }]);\n\n  return HTML;\n}(PureComponent);\n\nHTML.propTypes = {\n  renderers: PropTypes.object.isRequired,\n  ignoredTags: PropTypes.array.isRequired,\n  ignoredStyles: PropTypes.array.isRequired,\n  allowedStyles: PropTypes.array,\n  decodeEntities: PropTypes.bool.isRequired,\n  debug: PropTypes.bool.isRequired,\n  listsPrefixesRenderers: PropTypes.object,\n  ignoreNodesFunction: PropTypes.func,\n  alterData: PropTypes.func,\n  alterChildren: PropTypes.func,\n  alterNode: PropTypes.func,\n  html: PropTypes.string,\n  uri: PropTypes.string,\n  tagsStyles: PropTypes.object,\n  classesStyles: PropTypes.object,\n  containerStyle: ViewPropTypes ? ViewPropTypes.style : View.propTypes.style,\n  customWrapper: PropTypes.func,\n  onLinkPress: PropTypes.func,\n  onParsed: PropTypes.func,\n  imagesMaxWidth: PropTypes.number,\n  staticContentMaxWidth: PropTypes.number,\n  imagesInitialDimensions: PropTypes.shape({\n    width: PropTypes.number,\n    height: PropTypes.number\n  }),\n  emSize: PropTypes.number.isRequired,\n  ptSize: PropTypes.number.isRequired,\n  baseFontStyle: PropTypes.object.isRequired,\n  textSelectable: PropTypes.bool,\n  renderersProps: PropTypes.object,\n  allowFontScaling: PropTypes.bool\n};\nHTML.defaultProps = {\n  renderers: HTMLRenderers,\n  debug: false,\n  decodeEntities: true,\n  emSize: 14,\n  ptSize: 1.3,\n  staticContentMaxWidth: Dimensions.get('window').width,\n  imagesMaxWidth: Dimensions.get('window').width,\n  ignoredTags: IGNORED_TAGS,\n  ignoredStyles: [],\n  baseFontStyle: {\n    fontSize: 14\n  },\n  tagsStyles: {},\n  classesStyles: {},\n  textSelectable: false,\n  allowFontScaling: true\n};\nexport { HTML as default };","map":{"version":3,"sources":["/home/alex/workspace/papamama/node_modules/react-native-render-html/src/HTML.js"],"names":["React","PureComponent","PropTypes","cssStringToRNStyle","_getElementClassStyles","cssStringToObject","cssObjectToString","computeTextStyles","BLOCK_TAGS","TEXT_TAGS","MIXED_TAGS","IGNORED_TAGS","TEXT_TAGS_IGNORING_ASSOCIATION","STYLESETS","TextOnlyPropTypes","PREFORMATTED_TAGS","generateDefaultBlockStyles","generateDefaultTextStyles","DomHandler","Parser","HTMLRenderers","HTML","props","state","renderers","generateDefaultStyles","baseFontStyle","registerDOM","prevProps","prevState","html","uri","doParseDOM","dom","parseDOM","cb","setState","loadingRemoteURL","errorLoadingRemoteURL","fetch","response","_bodyText","console","warn","decodeEntities","debug","onParsed","parser","_err","RNElements","mapDOMNodesTORNElements","alteredRNElements","RNNodes","renderRNElements","log","write","done","defaultBlockStyles","fontSize","defaultTextStyles","children","i","length","wrapper","child","indexOf","tagName","parent","name","wrappedTexts","j","nextSibling","push","attribs","nodeIndex","parentTag","filter","parsedNode","undefined","DOMNodes","ignoreNodesFunction","ignoredTags","alterNode","alterData","alterChildren","tagsStyles","classesStyles","map","node","data","tag","toLowerCase","alteredNode","type","alteredData","alteredChildren","strippedData","replace","associateRawTexts","childrenNeedAView","firstChild","wrapperHasTextChild","wrapperStyles","style","textChildrenInheritedStyles","Object","keys","forEach","styleKey","parentWrapper","parentIndex","allowFontScaling","allowedStyles","emSize","ignoredStyles","ptSize","textSelectable","element","index","Wrapper","Text","View","key","convertedCSSStyles","TEXT","VIEW","childElements","childIndex","customRenderer","renderer","rawChildren","classStyles","textElement","s","renderersProps","selectable","customWrapper","remoteLoadingView","remoteErrorView","flex","alignItems","fontStyle","containerStyle","propTypes","object","isRequired","array","bool","listsPrefixesRenderers","func","string","ViewPropTypes","onLinkPress","imagesMaxWidth","number","staticContentMaxWidth","imagesInitialDimensions","shape","width","height","defaultProps","Dimensions","get"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,SAAP,MAAsB,YAAtB;;;;;;AAEA,SAASC,kBAAT,EAA6BC,sBAA7B,EAAqDC,iBAArD,EAAwEC,iBAAxE,EAA2FC,iBAA3F;AACA,SACIC,UADJ,EAEIC,SAFJ,EAGIC,UAHJ,EAIIC,YAJJ,EAKIC,8BALJ,EAMIC,SANJ,EAOIC,iBAPJ,EAQIC,iBARJ;AAUA,SAASC,0BAAT,EAAqCC,yBAArC;AACA,SAASC,UAAT,EAAqBC,MAArB,QAAmC,aAAnC;AACA,OAAO,KAAKC,aAAZ;;IAEqBC,I;;;;;AAoDjB,gBAAaC,KAAb,EAAoB;AAAA;;AAAA;;AAChB,8BAAMA,KAAN;AACA,UAAKC,KAAL,GAAa,EAAb;AACA,UAAKC,SAAL,mCACOJ,aADP,GAEQ,MAAKE,KAAL,CAAWE,SAAX,IAAwB,EAFhC;;AAKA,UAAKC,qBAAL,CAA2BH,KAAK,CAACI,aAAjC;;AARgB;AASnB;;;;wCAEoB;AACjB,WAAKC,WAAL;AACH;;;uCAEkBC,S,EAAWC,S,EAAW;AAAA,UAC7BC,IAD6B,GACJF,SADI,CAC7BE,IAD6B;AAAA,UACvBC,GADuB,GACJH,SADI,CACvBG,GADuB;AAAA,UAClBP,SADkB,GACJI,SADI,CAClBJ,SADkB;AAErC,UAAIQ,UAAU,GAAG,KAAjB;AAEA,WAAKP,qBAAL,CAA2B,KAAKH,KAAL,CAAWI,aAAtC;;AACA,UAAIF,SAAS,KAAK,KAAKF,KAAL,CAAWE,SAA7B,EAAwC;AACpC,aAAKA,SAAL,mCAAsBJ,aAAtB,GAAyC,KAAKE,KAAL,CAAWE,SAAX,IAAwB,EAAjE;AACH;;AACD,UAAIM,IAAI,KAAK,KAAKR,KAAL,CAAWQ,IAApB,IAA4BC,GAAG,KAAK,KAAKT,KAAL,CAAWS,GAAnD,EAAwD;AAEpD,aAAKJ,WAAL,CAAiB,KAAKL,KAAtB;AACH;;AACD,UAAI,KAAKC,KAAL,CAAWU,GAAX,KAAmBJ,SAAS,CAACI,GAAjC,EAAsC;AAClC,aAAKC,QAAL,CAAc,KAAKX,KAAL,CAAWU,GAAzB,EAA8B,KAAKX,KAAnC;AACH;AACJ;;;;;;;;;;;;;;AAEkBA,cAAAA,K,2DAAQ,KAAKA,K;AAAOa,cAAAA,E;AAC3BL,cAAAA,I,GAAcR,K,CAAdQ,I,EAAMC,G,GAAQT,K,CAARS,G;;mBACVD,I;;;;;AACA,mBAAKM,QAAL,CAAc;AAAEH,gBAAAA,GAAG,EAAEH,IAAP;AAAaO,gBAAAA,gBAAgB,EAAE,KAA/B;AAAsCC,gBAAAA,qBAAqB,EAAE;AAA7D,eAAd;;;;;mBACOhB,KAAK,CAACS,G;;;;;;;AAKL,mBAAKK,QAAL,CAAc;AAAEC,gBAAAA,gBAAgB,EAAE,IAApB;AAA0BC,gBAAAA,qBAAqB,EAAE;AAAjD,eAAd;;+CACqBC,KAAK,CAACR,GAAD,C;;;AAAtBS,cAAAA,Q;AACJ,mBAAKJ,QAAL,CAAc;AAAEH,gBAAAA,GAAG,EAAEO,QAAQ,CAACC,SAAhB;AAA2BJ,gBAAAA,gBAAgB,EAAE;AAA7C,eAAd;;;;;;;AAEAK,cAAAA,OAAO,CAACC,IAAR;AACA,mBAAKP,QAAL,CAAc;AAAEE,gBAAAA,qBAAqB,EAAE,IAAzB;AAA+BD,gBAAAA,gBAAgB,EAAE;AAAjD,eAAd;;;;;;;;;AAGJK,cAAAA,OAAO,CAACC,IAAR,CAAa,0BAAb,6CAAkFZ,GAAlF;+CACO,K;;;;;;;AAGXW,cAAAA,OAAO,CAACC,IAAR,CAAa,0BAAb,EAAyC,sCAAzC;;;;;;;;;;;6BAIEV,G,EAAyB;AAAA;;AAAA,UAApBX,KAAoB,uEAAZ,KAAKA,KAAO;AAAA,wBACa,KAAKA,KADlB;AAAA,UACvBsB,cADuB,eACvBA,cADuB;AAAA,UACPC,KADO,eACPA,KADO;AAAA,UACAC,QADA,eACAA,QADA;AAE/B,UAAMC,MAAM,GAAG,IAAI5B,MAAJ,CACX,IAAID,UAAJ,CAAe,UAAC8B,IAAD,EAAOf,GAAP,EAAe;AAC1B,YAAIgB,UAAU,GAAG,MAAI,CAACC,uBAAL,CAA6BjB,GAA7B,EAAkC,KAAlC,EAAyCX,KAAzC,CAAjB;;AACA,YAAIwB,QAAJ,EAAc;AACV,cAAMK,iBAAiB,GAAGL,QAAQ,CAACb,GAAD,EAAMgB,UAAN,CAAlC;;AACA,cAAIE,iBAAJ,EAAuB;AACnBF,YAAAA,UAAU,GAAGE,iBAAb;AACH;AACJ;;AACD,QAAA,MAAI,CAACf,QAAL,CAAc;AAAEgB,UAAAA,OAAO,EAAE,MAAI,CAACC,gBAAL,CAAsBJ,UAAtB,EAAkC,MAAlC,EAA0C,CAA1C,EAA6C3B,KAA7C;AAAX,SAAd;;AACA,YAAIuB,KAAJ,EAAW;AACPH,UAAAA,OAAO,CAACY,GAAR,CAAY,2BAAZ,EAAyCrB,GAAzC;AACAS,UAAAA,OAAO,CAACY,GAAR,CAAY,6BAAZ,EAA2CL,UAA3C;AACH;AACJ,OAbD,CADW,EAeX;AAAEL,QAAAA,cAAc,EAAEA;AAAlB,OAfW,CAAf;AAiBAG,MAAAA,MAAM,CAACQ,KAAP,CAAatB,GAAb;AACAc,MAAAA,MAAM,CAACS,IAAP;AACH;;;4CAEgE;AAAA,UAA1C9B,aAA0C,uEAA1B,KAAKJ,KAAL,CAAWI,aAAe;AAC7D,WAAK+B,kBAAL,GAA0BzC,0BAA0B,CAACU,aAAa,CAACgC,QAAd,IAA0B,EAA3B,CAApD;AACA,WAAKC,iBAAL,GAAyB1C,yBAAyB,CAACS,aAAa,CAACgC,QAAd,IAA0B,EAA3B,CAAlD;AACH;;;sCAQkBE,Q,EAAU;AACzB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,YAAID,QAAQ,CAACC,CAAD,CAAR,CAAYE,OAAZ,KAAwB,MAA5B,EAAoC;AAEhC,iBAAO,IAAP;AACH;AACJ;;AAED,aAAO,KAAP;AACH;;;wCAEoBH,Q,EAAU;AAC3B,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,YAAID,QAAQ,CAACC,CAAD,CAAR,CAAYE,OAAZ,KAAwB,MAA5B,EAAoC;AAChC,iBAAO,IAAP;AACH;AACJ;;AACD,aAAO,KAAP;AACH;;;sCAUkBH,Q,EAAU;AACzB,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,YAAMG,KAAK,GAAGJ,QAAQ,CAACC,CAAD,CAAtB;;AACA,YACKG,KAAK,CAACD,OAAN,KAAkB,MAAlB,IAA4BnD,8BAA8B,CAACqD,OAA/B,CAAuCD,KAAK,CAACE,OAA7C,MAA0D,CAAC,CAAxF,IACAN,QAAQ,CAACE,MAAT,GAAkB,CADlB,KAEC,CAACE,KAAK,CAACG,MAAP,IAAiBvD,8BAA8B,CAACqD,OAA/B,CAAuCD,KAAK,CAACG,MAAN,CAAaC,IAApD,MAA8D,CAAC,CAFjF,CADJ,EAIE;AAEE,cAAIC,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAIC,CAAC,GAAGT,CAAb,EAAgBS,CAAC,GAAGV,QAAQ,CAACE,MAA7B,EAAqCQ,CAAC,EAAtC,EAA0C;AAGtC,gBAAIC,WAAW,GAAGX,QAAQ,CAACU,CAAD,CAA1B;;AACA,gBAAIC,WAAW,CAACR,OAAZ,KAAwB,MAAxB,IAAkCnD,8BAA8B,CAACqD,OAA/B,CAAuCM,WAAW,CAACL,OAAnD,MAAgE,CAAC,CAAvG,EAA0G;AACtG;AACH;;AACDG,YAAAA,YAAY,CAACG,IAAb,CAAkBD,WAAlB;AAEAX,YAAAA,QAAQ,CAACU,CAAD,CAAR,GAAc,KAAd;AACH;;AAED,cAAID,YAAY,CAACP,MAAjB,EAAyB;AACrBF,YAAAA,QAAQ,CAACC,CAAD,CAAR,GAAc;AACVY,cAAAA,OAAO,EAAE,EADC;AAEVb,cAAAA,QAAQ,EAAES,YAFA;AAGVK,cAAAA,SAAS,EAAEb,CAHD;AAIVM,cAAAA,MAAM,EAAEH,KAAK,CAACG,MAJJ;AAKVQ,cAAAA,SAAS,EAAEX,KAAK,CAACW,SALP;AAMVT,cAAAA,OAAO,EAAE,aANC;AAOVH,cAAAA,OAAO,EAAE;AAPC,aAAd;AASH;AACJ;AACJ;;AACD,aAAOH,QAAQ,CAACgB,MAAT,CAAgB,UAACC,UAAD;AAAA,eAAgBA,UAAU,KAAK,KAAf,IAAwBA,UAAU,KAAKC,SAAvD;AAAA,OAAhB,CAAP;AACH;;;4CAYwBC,Q,EAAiD;AAAA;;AAAA,UAAvCJ,SAAuC,uEAA3B,KAA2B;AAAA,UAApBrD,KAAoB,uEAAZ,KAAKA,KAAO;AAAA,UAC9D0D,mBAD8D,GACuC1D,KADvC,CAC9D0D,mBAD8D;AAAA,UACzCC,WADyC,GACuC3D,KADvC,CACzC2D,WADyC;AAAA,UAC5BC,SAD4B,GACuC5D,KADvC,CAC5B4D,SAD4B;AAAA,UACjBC,SADiB,GACuC7D,KADvC,CACjB6D,SADiB;AAAA,UACNC,aADM,GACuC9D,KADvC,CACN8D,aADM;AAAA,UACSC,UADT,GACuC/D,KADvC,CACS+D,UADT;AAAA,UACqBC,aADrB,GACuChE,KADvC,CACqBgE,aADrB;AAEtE,UAAIrC,UAAU,GAAG8B,QAAQ,CAACQ,GAAT,CAAa,UAACC,IAAD,EAAOd,SAAP,EAAqB;AAAA,oBACtBc,IADsB;AAAA,YACzC5B,QADyC,SACzCA,QADyC;AAAA,YAC/B6B,IAD+B,SAC/BA,IAD+B;;AAE/C,YAAIT,mBAAmB,IAAIA,mBAAmB,CAACQ,IAAD,EAAOb,SAAP,CAAnB,KAAyC,IAApE,EAA0E;AACtE,iBAAO,KAAP;AACH;;AACD,YAAIM,WAAW,CAACM,GAAZ,CAAgB,UAACG,GAAD;AAAA,iBAASA,GAAG,CAACC,WAAJ,EAAT;AAAA,SAAhB,EAA4C1B,OAA5C,CAAoDuB,IAAI,CAACpB,IAAL,IAAaoB,IAAI,CAACpB,IAAL,CAAUuB,WAAV,EAAjE,MAA8F,CAAC,CAAnG,EAAsG;AAClG,iBAAO,KAAP;AACH;;AAED,YAAIT,SAAJ,EAAe;AACX,cAAMU,WAAW,GAAGV,SAAS,CAACM,IAAD,CAA7B;AACAA,UAAAA,IAAI,GAAGI,WAAW,IAAIJ,IAAtB;AACH;;AAZ8C,qBAaPA,IAbO;AAAA,YAavCK,IAbuC,UAavCA,IAbuC;AAAA,YAajCpB,OAbiC,UAajCA,OAbiC;AAAA,YAaxBL,IAbwB,UAaxBA,IAbwB;AAAA,YAalBD,MAbkB,UAalBA,MAbkB;;AAe/C,YAAIgB,SAAS,IAAIM,IAAjB,EAAuB;AACnB,cAAMK,WAAW,GAAGX,SAAS,CAACK,IAAD,CAA7B;AACAC,UAAAA,IAAI,GAAGK,WAAW,IAAIL,IAAtB;AACH;;AACD,YAAIL,aAAa,IAAIxB,QAArB,EAA+B;AAC3B,cAAMmC,eAAe,GAAGX,aAAa,CAACI,IAAD,CAArC;AACA5B,UAAAA,QAAQ,GAAGmC,eAAe,IAAInC,QAA9B;AACH;;AAED,YAAMoC,YAAY,GAAGP,IAAI,IAAIA,IAAI,CAACQ,OAAL,CAAa,KAAb,EAAoB,EAApB,CAA7B;;AACA,YAAIJ,IAAI,KAAK,MAAb,EAAqB;AACjB,cAAI,CAACG,YAAD,IAAiB,CAACA,YAAY,CAAClC,MAAnC,EAA2C;AAEvC,mBAAO,KAAP;AACH;;AAED,cACI0B,IAAI,CAACrB,MAAL,IACAqB,IAAI,CAACrB,MAAL,CAAYC,IADZ,IAEArD,iBAAiB,CAACkD,OAAlB,CAA0BuB,IAAI,CAACrB,MAAL,CAAYC,IAAtC,MAAgD,CAAC,CAHrD,EAIE;AAEEqB,YAAAA,IAAI,GAAGA,IAAI,CAACQ,OAAL,CAAa,gBAAb,EAA+B,EAA/B,CAAP;AACH;;AAGD,iBAAO;AACHlC,YAAAA,OAAO,EAAE,MADN;AAEH0B,YAAAA,IAAI,EAAEA,IAFH;AAGHhB,YAAAA,OAAO,EAAEA,OAAO,IAAI,EAHjB;AAIHN,YAAAA,MAAM,EAANA,MAJG;AAKHQ,YAAAA,SAAS,EAAER,MAAM,IAAIA,MAAM,CAACC,IALzB;AAMHF,YAAAA,OAAO,EAAEE,IAAI,IAAI;AANd,WAAP;AAQH;;AACD,YAAIyB,IAAI,KAAK,KAAb,EAAoB;AAChB,cAAIjC,QAAJ,EAAc;AAEVA,YAAAA,QAAQ,GAAG,MAAI,CAACsC,iBAAL,CAAuB,MAAI,CAAChD,uBAAL,CAA6BU,QAA7B,EAAuCQ,IAAvC,CAAvB,CAAX;AACH;;AACD,cAAI,MAAI,CAAC+B,iBAAL,CAAuBvC,QAAvB,KAAoCpD,UAAU,CAACyD,OAAX,CAAmBG,IAAI,CAACuB,WAAL,EAAnB,MAA2C,CAAC,CAApF,EAAuF;AAGnF,mBAAO;AAAE5B,cAAAA,OAAO,EAAE,MAAX;AAAmBH,cAAAA,QAAQ,EAARA,QAAnB;AAA6Ba,cAAAA,OAAO,EAAPA,OAA7B;AAAsCN,cAAAA,MAAM,EAANA,MAAtC;AAA8CD,cAAAA,OAAO,EAAEE,IAAvD;AAA6DO,cAAAA,SAAS,EAATA;AAA7D,aAAP;AACH,WAJD,MAIO,IAAIlE,SAAS,CAACwD,OAAV,CAAkBG,IAAI,CAACuB,WAAL,EAAlB,MAA0C,CAAC,CAA3C,IAAgDjF,UAAU,CAACuD,OAAX,CAAmBG,IAAI,CAACuB,WAAL,EAAnB,MAA2C,CAAC,CAAhG,EAAmG;AAEtG,mBAAO;AAAE5B,cAAAA,OAAO,EAAE,MAAX;AAAmBH,cAAAA,QAAQ,EAARA,QAAnB;AAA6Ba,cAAAA,OAAO,EAAPA,OAA7B;AAAsCN,cAAAA,MAAM,EAANA,MAAtC;AAA8CD,cAAAA,OAAO,EAAEE,IAAvD;AAA6DO,cAAAA,SAAS,EAATA;AAA7D,aAAP;AACH,WAHM,MAGA,IAAI,MAAI,CAACnD,SAAL,CAAe4C,IAAf,KAAwB,MAAI,CAAC5C,SAAL,CAAe4C,IAAf,EAAqBL,OAAjD,EAA0D;AAC7D,mBAAO;AAAEA,cAAAA,OAAO,EAAE,MAAI,CAACvC,SAAL,CAAe4C,IAAf,EAAqBL,OAAhC;AAAyCH,cAAAA,QAAQ,EAARA,QAAzC;AAAmDa,cAAAA,OAAO,EAAPA,OAAnD;AAA4DN,cAAAA,MAAM,EAANA,MAA5D;AAAoED,cAAAA,OAAO,EAAEE,IAA7E;AAAmFO,cAAAA,SAAS,EAATA;AAAnF,aAAP;AACH;;AACD,iBAAO;AAAEZ,YAAAA,OAAO,EAAE,MAAX;AAAmBH,YAAAA,QAAQ,EAARA,QAAnB;AAA6Ba,YAAAA,OAAO,EAAPA,OAA7B;AAAsCN,YAAAA,MAAM,EAANA,MAAtC;AAA8CD,YAAAA,OAAO,EAAEE,IAAvD;AAA6DO,YAAAA,SAAS,EAATA;AAA7D,WAAP;AACH;AACJ,OAnEgB,EAoEhBC,MApEgB,CAoET,UAACC,UAAD;AAAA,eAAgBA,UAAU,KAAK,KAAf,IAAwBA,UAAU,KAAKC,SAAvD;AAAA,OApES,EAqEhBS,GArEgB,CAqEZ,UAACV,UAAD,EAAaH,SAAb,EAA2B;AAAA,YACpBX,OADoB,GACoBc,UADpB,CACpBd,OADoB;AAAA,YACXH,QADW,GACoBiB,UADpB,CACXjB,QADW;AAAA,YACDa,OADC,GACoBI,UADpB,CACDJ,OADC;AAAA,YACQP,OADR,GACoBW,UADpB,CACQX,OADR;AAE5B,YAAMkC,UAAU,GAAGxC,QAAQ,IAAIA,QAAQ,CAAC,CAAD,CAAvC;;AACA,YAAIwC,UAAU,IAAIxC,QAAQ,CAACE,MAAT,KAAoB,CAAtC,EAAyC;AAErC,cAAI,CAACW,OAAO,KAAK2B,UAAU,CAAC3B,OAAvB,IAAkC,CAAC2B,UAAU,CAAC3B,OAA/C,KACA2B,UAAU,CAACrC,OAAX,KAAuBA,OADvB,KAECG,OAAO,KAAKkC,UAAU,CAAClC,OAAvB,IAAkCkC,UAAU,CAAClC,OAAX,KAAuB,SAF1D,CAAJ,EAE0E;AAEtE,mDACOW,UADP;AAEIJ,cAAAA,OAAO,kCAAOA,OAAP,GAAmB2B,UAAU,CAAC3B,OAA9B,CAFX;AAGIgB,cAAAA,IAAI,EAAEW,UAAU,CAACX,IAHrB;AAII7B,cAAAA,QAAQ,EAAE,EAJd;AAKIM,cAAAA,OAAO,EAAPA,OALJ;AAMIQ,cAAAA,SAAS,EAATA;AANJ;AAQH;AACJ;;AACD,+CAAYG,UAAZ;AAAwBH,UAAAA,SAAS,EAATA;AAAxB;AACH,OAzFgB,EA0FhBa,GA1FgB,CA0FZ,UAACV,UAAD,EAAaH,SAAb,EAA2B;AAAA,YACpBX,OADoB,GACoBc,UADpB,CACpBd,OADoB;AAAA,YACXU,OADW,GACoBI,UADpB,CACXJ,OADW;AAAA,YACFP,OADE,GACoBW,UADpB,CACFX,OADE;AAAA,YACON,QADP,GACoBiB,UADpB,CACOjB,QADP;;AAE5B,YAAIG,OAAO,KAAK,MAAZ,IAAsBU,OAAtB,IAAiC,MAAI,CAAC4B,mBAAL,CAAyBzC,QAAzB,CAArC,EAAyE;AAIrE,cAAM0C,aAAa,iDACXjB,UAAU,CAACnB,OAAD,CAAV,IAAuB,EADZ,GAEX9D,sBAAsB,CAACqE,OAAD,EAAUa,aAAV,CAFX,GAGZjF,iBAAiB,CAACoE,OAAO,CAAC8B,KAAR,IAAiB,EAAlB,CAHL,CAAnB;;AAMA,cAAIC,2BAA2B,GAAG,EAAlC;AACAC,UAAAA,MAAM,CAACC,IAAP,CAAYJ,aAAZ,EAA2BK,OAA3B,CAAmC,UAACC,QAAD,EAAc;AAE7C,gBAAI9F,iBAAiB,CAACmD,OAAlB,CAA0B2C,QAA1B,MAAwC,CAAC,CAA7C,EAAgD;AAC5CJ,cAAAA,2BAA2B,CAACI,QAAD,CAA3B,GAAwCN,aAAa,CAACM,QAAD,CAArD;AACA,qBAAON,aAAa,CAACM,QAAD,CAApB;AACH;AACJ,WAND;;AAOA,cAAIH,MAAM,CAACC,IAAP,CAAYF,2BAAZ,EAAyC1C,MAAzC,KAAoD,CAAxD,EAA2D;AAEvD,mBAAOe,UAAP;AACH;;AAEDA,UAAAA,UAAU,CAACJ,OAAX,CAAmB8B,KAAnB,GAA2BjG,iBAAiB,CAACgG,aAAD,CAA5C;;AACA,eAAK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAAQ,CAACE,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtC,gBAAMG,KAAK,GAAGJ,QAAQ,CAACC,CAAD,CAAtB;AADsC,gBAE9BE,QAF8B,GAETC,KAFS,CAE9BD,OAF8B;AAAA,gBAErBU,QAFqB,GAETT,KAFS,CAErBS,OAFqB;;AAItC,gBAAIV,QAAO,KAAK,MAAhB,EAAwB;AAGpB,kBAAI,CAACU,QAAO,CAAC8B,KAAb,EAAoB;AAChBvC,gBAAAA,KAAK,CAACS,OAAN,CAAc8B,KAAd,GAAsBjG,iBAAiB,CAACkG,2BAAD,CAAvC;AACH,eAFD,MAEO;AACHxC,gBAAAA,KAAK,CAACS,OAAN,CAAc8B,KAAd,GAAsBjG,iBAAiB,iCAChCkG,2BADgC,GAEhCnG,iBAAiB,CAAC2D,KAAK,CAACS,OAAN,CAAc8B,KAAf,CAFe,EAAvC;AAIH;AACJ;AACJ;AACJ;;AACD,eAAO1B,UAAP;AACH,OAvIgB,CAAjB;AAwIA,aAAO,KAAKqB,iBAAL,CAAuBjD,UAAvB,CAAP;AACH;;;qCAYiBA,U,EAAyE;AAAA;;AAAA,UAA7D4D,aAA6D,uEAA7C,MAA6C;AAAA,UAArCC,WAAqC,uEAAvB,CAAuB;AAAA,UAApBxF,KAAoB,uEAAZ,KAAKA,KAAO;AAAA,UAEnFyF,gBAFmF,GAWnFzF,KAXmF,CAEnFyF,gBAFmF;AAAA,UAGnFC,aAHmF,GAWnF1F,KAXmF,CAGnF0F,aAHmF;AAAA,UAInFtF,aAJmF,GAWnFJ,KAXmF,CAInFI,aAJmF;AAAA,UAKnF4D,aALmF,GAWnFhE,KAXmF,CAKnFgE,aALmF;AAAA,UAMnF2B,MANmF,GAWnF3F,KAXmF,CAMnF2F,MANmF;AAAA,UAOnFC,aAPmF,GAWnF5F,KAXmF,CAOnF4F,aAPmF;AAAA,UAQnFC,MARmF,GAWnF7F,KAXmF,CAQnF6F,MARmF;AAAA,UASnF9B,UATmF,GAWnF/D,KAXmF,CASnF+D,UATmF;AAAA,UAUnF+B,cAVmF,GAWnF9F,KAXmF,CAUnF8F,cAVmF;AAavF,aAAOnE,UAAU,IAAIA,UAAU,CAACa,MAAzB,GAAkCb,UAAU,CAACsC,GAAX,CAAe,UAAC8B,OAAD,EAAUC,KAAV,EAAoB;AAAA,YAChE7C,OADgE,GACI4C,OADJ,CAChE5C,OADgE;AAAA,YACvDgB,IADuD,GACI4B,OADJ,CACvD5B,IADuD;AAAA,YACjDvB,OADiD,GACImD,OADJ,CACjDnD,OADiD;AAAA,YACxCS,SADwC,GACI0C,OADJ,CACxC1C,SADwC;AAAA,YAC7Bf,QAD6B,GACIyD,OADJ,CAC7BzD,QAD6B;AAAA,YACnBc,SADmB,GACI2C,OADJ,CACnB3C,SADmB;AAAA,YACRX,OADQ,GACIsD,OADJ,CACRtD,OADQ;AAExE,YAAMwD,OAAO,GAAGxD,OAAO,KAAK,MAAZ,GAAqByD,IAArB,GAA4BC,IAA5C;AACA,YAAMC,GAAG,GAAM3D,OAAN,SAAiB+C,WAAjB,SAAgCpC,SAAhC,SAA6CR,OAA7C,SAAwDoD,KAAxD,SAAiE3C,SAA1E;AACA,YAAMgD,kBAAkB,GACpBlD,OAAO,IAAIA,OAAO,CAAC8B,KAAnB,GACIpG,kBAAkB,CACdsE,OAAO,CAAC8B,KADM,EAEdgB,OAAO,KAAKC,IAAZ,GAAmB3G,SAAS,CAAC+G,IAA7B,GAAoC/G,SAAS,CAACgH,IAFhC,EAGd;AAAElD,UAAAA,SAAS,EAAET,OAAb;AAAsB+C,UAAAA,MAAM,EAANA,MAAtB;AAA8BE,UAAAA,MAAM,EAANA,MAA9B;AAAsCD,UAAAA,aAAa,EAAbA,aAAtC;AAAqDF,UAAAA,aAAa,EAAbA;AAArD,SAHc,CADtB,GAMI,EAPR;AASA,YAAMc,aAAa,GAAGlE,QAAQ,IAAIA,QAAQ,CAACE,MAArB,GAClBF,QAAQ,CAAC2B,GAAT,CAAa,UAACvB,KAAD,EAAQ+D,UAAR;AAAA,iBAAuB,MAAI,CAAC1E,gBAAL,CAAsB,CAACW,KAAD,CAAtB,EAA+BD,OAA/B,EAAwCuD,KAAxC,EAA+ChG,KAA/C,CAAvB;AAAA,SAAb,CADkB,GAElB,KAFJ;;AAIA,YAAI,MAAI,CAACE,SAAL,CAAe0C,OAAf,CAAJ,EAA6B;AACzB,cAAM8D,cAAc,GAChB,OAAO,MAAI,CAACxG,SAAL,CAAe0C,OAAf,CAAP,KAAmC,UAAnC,GACI,MAAI,CAAC1C,SAAL,CAAe0C,OAAf,CADJ,GAEI,MAAI,CAAC1C,SAAL,CAAe0C,OAAf,EAAwB+D,QAHhC;;AAKA,cAAI,CAACD,cAAD,IAAmB,OAAOA,cAAP,KAA0B,UAAjD,EAA6D;AACzDtF,YAAAA,OAAO,CAACC,IAAR,0BAAoCuB,OAApC;AACA,mBAAOY,SAAP;AACH;;AAED,iBAAOkD,cAAc,CACjBvD,OADiB,EAEjBqD,aAFiB,EAGjBH,kBAHiB,kCAKVrG,KALU;AAMbuF,YAAAA,aAAa,EAAE9C,OANF;AAObY,YAAAA,SAAS,EAATA,SAPa;AAQbD,YAAAA,SAAS,EAATA,SARa;AASboC,YAAAA,WAAW,EAAXA,WATa;AAUbY,YAAAA,GAAG,EAAHA,GAVa;AAWbjC,YAAAA,IAAI,EAAJA,IAXa;AAYbyC,YAAAA,WAAW,EAAEtE;AAZA,aAArB;AAcH;;AAED,YAAMuE,WAAW,GAAG/H,sBAAsB,CAACqE,OAAD,EAAUa,aAAV,CAA1C;;AACA,YAAM8C,WAAW,GAAG3C,IAAI,GACpB,oBAAC,IAAD;AACE,UAAA,gBAAgB,EAAEsB,gBADpB;AAEE,UAAA,KAAK,EAAExG,iBAAiB,CACpB8G,OADoB,EAEpB;AACI1D,YAAAA,iBAAiB,EAAE,MAAI,CAACA,iBAD5B;AAEI0B,YAAAA,UAAU,EAAVA,UAFJ;AAGIC,YAAAA,aAAa,EAAbA,aAHJ;AAII5D,YAAAA,aAAa,EAAbA,aAJJ;AAKIuF,YAAAA,MAAM,EAANA,MALJ;AAMIE,YAAAA,MAAM,EAANA,MANJ;AAOID,YAAAA,aAAa,EAAbA,aAPJ;AAQIF,YAAAA,aAAa,EAAbA;AARJ,WAFoB,CAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAeMvB,IAfN,CADoB,GAkBpB,KAlBJ;AAoBA,YAAMc,KAAK,GAAG,CACT,CAAClB,UAAD,IAAe,CAACA,UAAU,CAACnB,OAAD,CAA3B,GAAwC,CAACqD,OAAO,KAAKC,IAAZ,GAAmB,MAAI,CAAC7D,iBAAxB,GAA4C,MAAI,CAACF,kBAAlD,EAAsES,OAAtE,CAAxC,GAAyHY,SAD/G,EAEVO,UAAU,GAAGA,UAAU,CAACnB,OAAD,CAAb,GAAyBY,SAFzB,EAGVqD,WAHU,EAIVR,kBAJU,EAMb/C,MANa,CAMN,UAACyD,CAAD;AAAA,iBAAOA,CAAC,KAAKvD,SAAb;AAAA,SANM,CAAd;AAQA,YAAMwD,cAAc,GAAG,EAAvB;;AACA,YAAIf,OAAO,KAAKC,IAAhB,EAAsB;AAClBc,UAAAA,cAAc,CAACvB,gBAAf,GAAkCA,gBAAlC;AACAuB,UAAAA,cAAc,CAACC,UAAf,GAA4BnB,cAA5B;AACH;;AACD,eACI,oBAAC,OAAD;AAAS,UAAA,GAAG,EAAEM,GAAd;AAAmB,UAAA,KAAK,EAAEnB;AAA1B,WAAqC+B,cAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YACMF,WADN,EAEMN,aAFN,CADJ;AAMH,OApFwC,CAAlC,GAoFF,KApFL;AAqFH;;;6BAES;AAAA,yBAC0E,KAAKxG,KAD/E;AAAA,UACEyF,gBADF,gBACEA,gBADF;AAAA,UACoByB,aADpB,gBACoBA,aADpB;AAAA,UACmCC,iBADnC,gBACmCA,iBADnC;AAAA,UACsDC,eADtD,gBACsDA,eADtD;AAAA,wBAEuD,KAAKnH,KAF5D;AAAA,UAEE6B,OAFF,eAEEA,OAFF;AAAA,UAEWf,gBAFX,eAEWA,gBAFX;AAAA,UAE6BC,qBAF7B,eAE6BA,qBAF7B;;AAGN,UAAI,CAACc,OAAD,IAAY,CAACf,gBAAb,IAAiC,CAACC,qBAAtC,EAA6D;AACzD,eAAO,IAAP;AACH,OAFD,MAEO,IAAID,gBAAJ,EAAsB;AACzB,eAAOoG,iBAAiB,GACpBA,iBAAiB,CAAC,KAAKnH,KAAN,EAAa,KAAKC,KAAlB,CADG,GAGhB,oBAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEoH,YAAAA,IAAI,EAAE,CAAR;AAAWC,YAAAA,UAAU,EAAE;AAAvB,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CAHR;AAOH,OARM,MAQA,IAAItG,qBAAJ,EAA2B;AAC9B,eAAOoG,eAAe,GAClBA,eAAe,CAAC,KAAKpH,KAAN,EAAa,KAAKC,KAAlB,CADG,GAGd,oBAAC,IAAD;AAAM,UAAA,KAAK,EAAE;AAAEoH,YAAAA,IAAI,EAAE,CAAR;AAAWC,YAAAA,UAAU,EAAE;AAAvB,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AAAM,UAAA,gBAAgB,EAAE7B,gBAAxB;AAA0C,UAAA,KAAK,EAAE;AAAE8B,YAAAA,SAAS,EAAE,QAAb;AAAuBnF,YAAAA,QAAQ,EAAE;AAAjC,WAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAyG,KAAKpC,KAAL,CAAWS,GAApH,CADJ,CAHR;AAOH;;AAED,aAAOyG,aAAa,GAAGA,aAAa,CAACpF,OAAD,CAAhB,GAChB,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE,KAAK9B,KAAL,CAAWwH,cAAX,IAA6B,EAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM1F,OADN,CADJ;AAKH;;;;EAlf6BnD,a;;AAAboB,I,CACV0H,S,GAAY;AACfvH,EAAAA,SAAS,EAAEtB,SAAS,CAAC8I,MAAV,CAAiBC,UADb;AAEfhE,EAAAA,WAAW,EAAE/E,SAAS,CAACgJ,KAAV,CAAgBD,UAFd;AAGf/B,EAAAA,aAAa,EAAEhH,SAAS,CAACgJ,KAAV,CAAgBD,UAHhB;AAIfjC,EAAAA,aAAa,EAAE9G,SAAS,CAACgJ,KAJV;AAKftG,EAAAA,cAAc,EAAE1C,SAAS,CAACiJ,IAAV,CAAeF,UALhB;AAMfpG,EAAAA,KAAK,EAAE3C,SAAS,CAACiJ,IAAV,CAAeF,UANP;AAOfG,EAAAA,sBAAsB,EAAElJ,SAAS,CAAC8I,MAPnB;AAQfhE,EAAAA,mBAAmB,EAAE9E,SAAS,CAACmJ,IARhB;AASflE,EAAAA,SAAS,EAAEjF,SAAS,CAACmJ,IATN;AAUfjE,EAAAA,aAAa,EAAElF,SAAS,CAACmJ,IAVV;AAWfnE,EAAAA,SAAS,EAAEhF,SAAS,CAACmJ,IAXN;AAYfvH,EAAAA,IAAI,EAAE5B,SAAS,CAACoJ,MAZD;AAafvH,EAAAA,GAAG,EAAE7B,SAAS,CAACoJ,MAbA;AAcfjE,EAAAA,UAAU,EAAEnF,SAAS,CAAC8I,MAdP;AAef1D,EAAAA,aAAa,EAAEpF,SAAS,CAAC8I,MAfV;AAgBfF,EAAAA,cAAc,EAAES,aAAa,GAAGA,aAAa,CAAChD,KAAjB,GAAyBkB,IAAI,CAACsB,SAAL,CAAexC,KAhBtD;AAiBfiC,EAAAA,aAAa,EAAEtI,SAAS,CAACmJ,IAjBV;AAkBfG,EAAAA,WAAW,EAAEtJ,SAAS,CAACmJ,IAlBR;AAmBfvG,EAAAA,QAAQ,EAAE5C,SAAS,CAACmJ,IAnBL;AAoBfI,EAAAA,cAAc,EAAEvJ,SAAS,CAACwJ,MApBX;AAqBfC,EAAAA,qBAAqB,EAAEzJ,SAAS,CAACwJ,MArBlB;AAsBfE,EAAAA,uBAAuB,EAAE1J,SAAS,CAAC2J,KAAV,CAAgB;AACrCC,IAAAA,KAAK,EAAE5J,SAAS,CAACwJ,MADoB;AAErCK,IAAAA,MAAM,EAAE7J,SAAS,CAACwJ;AAFmB,GAAhB,CAtBV;AA0BfzC,EAAAA,MAAM,EAAE/G,SAAS,CAACwJ,MAAV,CAAiBT,UA1BV;AA2Bf9B,EAAAA,MAAM,EAAEjH,SAAS,CAACwJ,MAAV,CAAiBT,UA3BV;AA4BfvH,EAAAA,aAAa,EAAExB,SAAS,CAAC8I,MAAV,CAAiBC,UA5BjB;AA6Bf7B,EAAAA,cAAc,EAAElH,SAAS,CAACiJ,IA7BX;AA8Bfb,EAAAA,cAAc,EAAEpI,SAAS,CAAC8I,MA9BX;AA+BfjC,EAAAA,gBAAgB,EAAE7G,SAAS,CAACiJ;AA/Bb,C;AADF9H,I,CAmCV2I,Y,GAAe;AAClBxI,EAAAA,SAAS,EAAEJ,aADO;AAElByB,EAAAA,KAAK,EAAE,KAFW;AAGlBD,EAAAA,cAAc,EAAE,IAHE;AAIlBqE,EAAAA,MAAM,EAAE,EAJU;AAKlBE,EAAAA,MAAM,EAAE,GALU;AAMlBwC,EAAAA,qBAAqB,EAAEM,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBJ,KAN9B;AAOlBL,EAAAA,cAAc,EAAEQ,UAAU,CAACC,GAAX,CAAe,QAAf,EAAyBJ,KAPvB;AAQlB7E,EAAAA,WAAW,EAAEtE,YARK;AASlBuG,EAAAA,aAAa,EAAE,EATG;AAUlBxF,EAAAA,aAAa,EAAE;AAAEgC,IAAAA,QAAQ,EAAE;AAAZ,GAVG;AAWlB2B,EAAAA,UAAU,EAAE,EAXM;AAYlBC,EAAAA,aAAa,EAAE,EAZG;AAalB8B,EAAAA,cAAc,EAAE,KAbE;AAclBL,EAAAA,gBAAgB,EAAE;AAdA,C;SAnCL1F,I","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { View, Text, ViewPropTypes, ActivityIndicator, Dimensions } from 'react-native';\nimport { cssStringToRNStyle, _getElementClassStyles, cssStringToObject, cssObjectToString, computeTextStyles } from './HTMLStyles';\nimport {\n    BLOCK_TAGS,\n    TEXT_TAGS,\n    MIXED_TAGS,\n    IGNORED_TAGS,\n    TEXT_TAGS_IGNORING_ASSOCIATION,\n    STYLESETS,\n    TextOnlyPropTypes,\n    PREFORMATTED_TAGS\n} from './HTMLUtils';\nimport { generateDefaultBlockStyles, generateDefaultTextStyles } from './HTMLDefaultStyles';\nimport { DomHandler, Parser } from 'htmlparser2';\nimport * as HTMLRenderers from './HTMLRenderers';\n\nexport default class HTML extends PureComponent {\n    static propTypes = {\n        renderers: PropTypes.object.isRequired,\n        ignoredTags: PropTypes.array.isRequired,\n        ignoredStyles: PropTypes.array.isRequired,\n        allowedStyles: PropTypes.array,\n        decodeEntities: PropTypes.bool.isRequired,\n        debug: PropTypes.bool.isRequired,\n        listsPrefixesRenderers: PropTypes.object,\n        ignoreNodesFunction: PropTypes.func,\n        alterData: PropTypes.func,\n        alterChildren: PropTypes.func,\n        alterNode: PropTypes.func,\n        html: PropTypes.string,\n        uri: PropTypes.string,\n        tagsStyles: PropTypes.object,\n        classesStyles: PropTypes.object,\n        containerStyle: ViewPropTypes ? ViewPropTypes.style : View.propTypes.style,\n        customWrapper: PropTypes.func,\n        onLinkPress: PropTypes.func,\n        onParsed: PropTypes.func,\n        imagesMaxWidth: PropTypes.number,\n        staticContentMaxWidth: PropTypes.number,\n        imagesInitialDimensions: PropTypes.shape({\n            width: PropTypes.number,\n            height: PropTypes.number\n        }),\n        emSize: PropTypes.number.isRequired,\n        ptSize: PropTypes.number.isRequired,\n        baseFontStyle: PropTypes.object.isRequired,\n        textSelectable: PropTypes.bool,\n        renderersProps: PropTypes.object,\n        allowFontScaling: PropTypes.bool\n    }\n\n    static defaultProps = {\n        renderers: HTMLRenderers,\n        debug: false,\n        decodeEntities: true,\n        emSize: 14,\n        ptSize: 1.3,\n        staticContentMaxWidth: Dimensions.get('window').width,\n        imagesMaxWidth: Dimensions.get('window').width,\n        ignoredTags: IGNORED_TAGS,\n        ignoredStyles: [],\n        baseFontStyle: { fontSize: 14 },\n        tagsStyles: {},\n        classesStyles: {},\n        textSelectable: false,\n        allowFontScaling: true\n    }\n\n    constructor (props) {\n        super(props);\n        this.state = {};\n        this.renderers = {\n            ...HTMLRenderers,\n            ...(this.props.renderers || {})\n        };\n\n        this.generateDefaultStyles(props.baseFontStyle);\n    }\n\n    componentDidMount () {\n        this.registerDOM();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { html, uri, renderers } = prevProps;\n        let doParseDOM = false;\n\n        this.generateDefaultStyles(this.props.baseFontStyle);\n        if (renderers !== this.props.renderers) {\n            this.renderers = { ...HTMLRenderers, ...(this.props.renderers || {}) };\n        }\n        if (html !== this.props.html || uri !== this.props.uri) {\n            // If the source changed, register the new HTML and parse it\n            this.registerDOM(this.props);\n        }\n        if (this.state.dom !== prevState.dom) {\n            this.parseDOM(this.state.dom, this.props);\n        }\n    }\n\n    async registerDOM (props = this.props, cb) {\n        const { html, uri } = props;\n        if (html) {\n            this.setState({ dom: html, loadingRemoteURL: false, errorLoadingRemoteURL: false });\n        } else if (props.uri) {\n            try {\n                // WIP : This should render a loader and html prop should not be set in state\n                // Error handling would be nice, too.\n                try {\n                    this.setState({ loadingRemoteURL: true, errorLoadingRemoteURL: false });\n                    let response = await fetch(uri);\n                    this.setState({ dom: response._bodyText, loadingRemoteURL: false });\n                } catch (err) {\n                    console.warn(err);\n                    this.setState({ errorLoadingRemoteURL: true, loadingRemoteURL: false });\n                }\n            } catch (err) {\n                console.warn('react-native-render-html', `Couldn't fetch remote HTML from uri : ${uri}`);\n                return false;\n            }\n        } else {\n            console.warn('react-native-render-html', 'Please provide the html or uri prop.');\n        }\n    }\n\n    parseDOM (dom, props = this.props) {\n        const { decodeEntities, debug, onParsed } = this.props;\n        const parser = new Parser(\n            new DomHandler((_err, dom) => {\n                let RNElements = this.mapDOMNodesTORNElements(dom, false, props);\n                if (onParsed) {\n                    const alteredRNElements = onParsed(dom, RNElements);\n                    if (alteredRNElements) {\n                        RNElements = alteredRNElements;\n                    }\n                }\n                this.setState({ RNNodes: this.renderRNElements(RNElements, 'root', 0, props) });\n                if (debug) {\n                    console.log('DOMNodes from htmlparser2', dom);\n                    console.log('RNElements from render-html', RNElements);\n                }\n            }),\n            { decodeEntities: decodeEntities }\n        );\n        parser.write(dom);\n        parser.done();\n    }\n\n    generateDefaultStyles (baseFontStyle = this.props.baseFontStyle) {\n        this.defaultBlockStyles = generateDefaultBlockStyles(baseFontStyle.fontSize || 14);\n        this.defaultTextStyles = generateDefaultTextStyles(baseFontStyle.fontSize || 14);\n    }\n\n    /**\n     * Loop on children and return whether if their parent needs to be a <View>\n     * @param {any} children\n     * @returns {boolean}\n     * @memberof HTML\n     */\n    childrenNeedAView (children) {\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].wrapper === 'View') {\n                // If we find at least one View, it has to be nested in one\n                return true;\n            }\n        }\n        // We didn't find a single view, it can be wrapped in a Text\n        return false;\n    }\n\n    wrapperHasTextChild (children) {\n        for (let i = 0; i < children.length; i++) {\n            if (children[i].wrapper === 'Text') {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Loops on children an find texts that need to be wrapped so we don't render line breaks\n     * The wrapper can either be a <p> when it should be a paragraph, or a custom tag named\n     * \"textwrapper\", which renders a plain <Text> component.\n     * @param {any} children\n     * @returns {array}\n     * @memberof HTML\n     */\n    associateRawTexts (children) {\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (\n                (child.wrapper === 'Text' && TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.tagName) === -1) &&\n                children.length > 1 &&\n                (!child.parent || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(child.parent.name) === -1)\n            ) {\n                // Texts outside <p> or not <p> themselves (with siblings)\n                let wrappedTexts = [];\n                for (let j = i; j < children.length; j++) {\n                    // Loop on its next siblings and store them in an array\n                    // until we encounter a block or a <p>\n                    let nextSibling = children[j];\n                    if (nextSibling.wrapper !== 'Text' || TEXT_TAGS_IGNORING_ASSOCIATION.indexOf(nextSibling.tagName) !== -1) {\n                        break;\n                    }\n                    wrappedTexts.push(nextSibling);\n                    // Remove the child that has been nested\n                    children[j] = false;\n                }\n                // Replace the raw text with a <p> that has wrappedTexts as its children\n                if (wrappedTexts.length) {\n                    children[i] = {\n                        attribs: {},\n                        children: wrappedTexts,\n                        nodeIndex: i,\n                        parent: child.parent,\n                        parentTag: child.parentTag,\n                        tagName: 'textwrapper',\n                        wrapper: 'Text'\n                    };\n                }\n            }\n        }\n        return children.filter((parsedNode) => parsedNode !== false && parsedNode !== undefined);\n    }\n\n    /**\n     * Maps the DOM nodes parsed by htmlparser2 into a simple structure that will be easy to render with\n     * native components. It removes ignored tags, chooses the right wrapper for each set of children\n     * to ensure we're not wrapping views inside texts and improves the structure recursively\n     * to prevent erratic rendering.\n     * @param {array} DOMNodes\n     * @param {boolean} [parentTag=false]\n     * @returns\n     * @memberof HTML\n     */\n    mapDOMNodesTORNElements (DOMNodes, parentTag = false, props = this.props) {\n        const { ignoreNodesFunction, ignoredTags, alterNode, alterData, alterChildren, tagsStyles, classesStyles } = props;\n        let RNElements = DOMNodes.map((node, nodeIndex) => {\n            let { children, data } = node;\n            if (ignoreNodesFunction && ignoreNodesFunction(node, parentTag) === true) {\n                return false;\n            }\n            if (ignoredTags.map((tag) => tag.toLowerCase()).indexOf(node.name && node.name.toLowerCase()) !== -1) {\n                return false;\n            }\n\n            if (alterNode) {\n                const alteredNode = alterNode(node);\n                node = alteredNode || node;\n            }\n            const { type, attribs, name, parent } = node;\n\n            if (alterData && data) {\n                const alteredData = alterData(node);\n                data = alteredData || data;\n            }\n            if (alterChildren && children) {\n                const alteredChildren = alterChildren(node);\n                children = alteredChildren || children;\n            }\n            // Remove whitespaces to check if it's just a blank text\n            const strippedData = data && data.replace(/\\s/g, '');\n            if (type === 'text') {\n                if (!strippedData || !strippedData.length) {\n                    // This is blank, don't render an useless additional component\n                    return false;\n                }\n\n                if (\n                    node.parent &&\n                    node.parent.name &&\n                    PREFORMATTED_TAGS.indexOf(node.parent.name) === -1\n                ) {\n                    // Remove line breaks in non-pre-formatted tags\n                    data = data.replace(/(\\r\\n|\\n|\\r)/gm, '');\n                }\n\n                // Text without tags, these can be mapped to the Text wrapper\n                return {\n                    wrapper: 'Text',\n                    data: data,\n                    attribs: attribs || {},\n                    parent,\n                    parentTag: parent && parent.name,\n                    tagName: name || 'rawtext'\n                };\n            }\n            if (type === 'tag') {\n                if (children) {\n                    // Recursively map all children with this method\n                    children = this.associateRawTexts(this.mapDOMNodesTORNElements(children, name));\n                }\n                if (this.childrenNeedAView(children) || BLOCK_TAGS.indexOf(name.toLowerCase()) !== -1) {\n                    // If children cannot be nested in a Text, or if the tag\n                    // maps to a block element, use a view\n                    return { wrapper: 'View', children, attribs, parent, tagName: name, parentTag };\n                } else if (TEXT_TAGS.indexOf(name.toLowerCase()) !== -1 || MIXED_TAGS.indexOf(name.toLowerCase()) !== -1) {\n                    // We are able to nest its children inside a Text\n                    return { wrapper: 'Text', children, attribs, parent, tagName: name, parentTag };\n                } else if (this.renderers[name] && this.renderers[name].wrapper) {\n                    return { wrapper: this.renderers[name].wrapper, children, attribs, parent, tagName: name, parentTag };\n                }\n                return { wrapper: 'View', children, attribs, parent, tagName: name, parentTag };\n            }\n        })\n        .filter((parsedNode) => parsedNode !== false && parsedNode !== undefined) // remove useless nodes\n        .map((parsedNode, nodeIndex) => {\n            const { wrapper, children, attribs, tagName } = parsedNode;\n            const firstChild = children && children[0];\n            if (firstChild && children.length === 1) {\n                // Specific tweaks for wrappers with a single child\n                if ((attribs === firstChild.attribs || !firstChild.attribs) &&\n                    firstChild.wrapper === wrapper &&\n                    (tagName === firstChild.tagName || firstChild.tagName === 'rawtext')) {\n                    // If the only child of a node is using the same wrapper, merge them into one\n                    return {\n                        ...parsedNode,\n                        attribs: { ...attribs, ...firstChild.attribs },\n                        data: firstChild.data,\n                        children: [],\n                        tagName,\n                        nodeIndex\n                    };\n                }\n            }\n            return { ...parsedNode, nodeIndex };\n        })\n        .map((parsedNode, nodeIndex) => {\n            const { wrapper, attribs, tagName, children } = parsedNode;\n            if (wrapper === 'View' && attribs && this.wrapperHasTextChild(children)) {\n                // When encountering a View wrapper that has some styles and also Text children,\n                // let's filter out text-only styles and apply those to *all* Text children and\n                // remove them from the wrapper, mimicking browsers' behaviour better.\n                const wrapperStyles = {\n                    ...(tagsStyles[tagName] || {}),\n                    ...(_getElementClassStyles(attribs, classesStyles)),\n                    ...cssStringToObject(attribs.style || '')\n                };\n\n                let textChildrenInheritedStyles = {};\n                Object.keys(wrapperStyles).forEach((styleKey) => {\n                    // Extract text-only styles\n                    if (TextOnlyPropTypes.indexOf(styleKey) !== -1) {\n                        textChildrenInheritedStyles[styleKey] = wrapperStyles[styleKey];\n                        delete wrapperStyles[styleKey];\n                    }\n                });\n                if (Object.keys(textChildrenInheritedStyles).length === 0) {\n                    // No style to apply to text children, avoid unecessary loops\n                    return parsedNode;\n                }\n                // Re-write wrapper's styles as a string\n                parsedNode.attribs.style = cssObjectToString(wrapperStyles);\n                for (let i = 0; i < children.length; i++) {\n                    const child = children[i];\n                    const { wrapper, attribs } = child;\n\n                    if (wrapper === 'Text') {\n                        // Set (or merge) the inherited text styles extracted from the wrapper for\n                        // each Text child\n                        if (!attribs.style) {\n                            child.attribs.style = cssObjectToString(textChildrenInheritedStyles);\n                        } else {\n                            child.attribs.style = cssObjectToString({\n                                ...textChildrenInheritedStyles,\n                                ...cssStringToObject(child.attribs.style)\n                            });\n                        }\n                    }\n                }\n            }\n            return parsedNode;\n        });\n        return this.associateRawTexts(RNElements);\n    }\n\n    /**\n     * Takes the parsed nodes from mapDOMNodesTORNElements and actually renders native components.\n     * Calls the utils that convert the CSS into react-native compatible styles and renders custom\n     * components when needed.\n     * @param {boolean} RNElements\n     * @param {string} [parentWrapper='root']\n     * @param {number} [parentIndex=0]\n     * @returns {array}\n     * @memberof HTML\n     */\n    renderRNElements (RNElements, parentWrapper = 'root', parentIndex = 0, props = this.props) {\n        const {\n            allowFontScaling,\n            allowedStyles,\n            baseFontStyle,\n            classesStyles,\n            emSize,\n            ignoredStyles,\n            ptSize,\n            tagsStyles,\n            textSelectable\n        } = props;\n\n        return RNElements && RNElements.length ? RNElements.map((element, index) => {\n            const { attribs, data, tagName, parentTag, children, nodeIndex, wrapper } = element;\n            const Wrapper = wrapper === 'Text' ? Text : View;\n            const key = `${wrapper}-${parentIndex}-${nodeIndex}-${tagName}-${index}-${parentTag}`;\n            const convertedCSSStyles =\n                attribs && attribs.style ?\n                    cssStringToRNStyle(\n                        attribs.style,\n                        Wrapper === Text ? STYLESETS.TEXT : STYLESETS.VIEW, // proper prop-types validation\n                        { parentTag: tagName, emSize, ptSize, ignoredStyles, allowedStyles }\n                    ) :\n                    {};\n\n            const childElements = children && children.length ?\n                children.map((child, childIndex) => this.renderRNElements([child], wrapper, index, props)) :\n                false;\n\n            if (this.renderers[tagName]) {\n                const customRenderer =\n                    typeof this.renderers[tagName] === 'function' ?\n                        this.renderers[tagName] :\n                        this.renderers[tagName].renderer;\n\n                if (!customRenderer || typeof customRenderer !== 'function') {\n                    console.warn(`Custom renderer for ${tagName} supplied incorrectly. Please check out the docs.`);\n                    return undefined;\n                }\n                // If a custom renderer is available for this tag\n                return customRenderer(\n                    attribs,\n                    childElements,\n                    convertedCSSStyles,\n                    {\n                        ...props,\n                        parentWrapper: wrapper,\n                        parentTag,\n                        nodeIndex,\n                        parentIndex,\n                        key,\n                        data,\n                        rawChildren: children\n                    });\n            }\n\n            const classStyles = _getElementClassStyles(attribs, classesStyles);\n            const textElement = data ?\n                <Text\n                  allowFontScaling={allowFontScaling}\n                  style={computeTextStyles(\n                      element,\n                      {\n                          defaultTextStyles: this.defaultTextStyles,\n                          tagsStyles,\n                          classesStyles,\n                          baseFontStyle,\n                          emSize,\n                          ptSize,\n                          ignoredStyles,\n                          allowedStyles\n                      })}\n                >\n                    { data }\n                </Text> :\n                false;\n\n            const style = [\n                (!tagsStyles || !tagsStyles[tagName]) ? (Wrapper === Text ? this.defaultTextStyles : this.defaultBlockStyles)[tagName] : undefined,\n                tagsStyles ? tagsStyles[tagName] : undefined,\n                classStyles,\n                convertedCSSStyles\n            ]\n            .filter((s) => s !== undefined);\n\n            const renderersProps = {};\n            if (Wrapper === Text) {\n                renderersProps.allowFontScaling = allowFontScaling;\n                renderersProps.selectable = textSelectable;\n            }\n            return (\n                <Wrapper key={key} style={style} {...renderersProps}>\n                    { textElement }\n                    { childElements }\n                </Wrapper>\n            );\n        }) : false;\n    }\n\n    render () {\n        const { allowFontScaling, customWrapper, remoteLoadingView, remoteErrorView } = this.props;\n        const { RNNodes, loadingRemoteURL, errorLoadingRemoteURL } = this.state;\n        if (!RNNodes && !loadingRemoteURL && !errorLoadingRemoteURL) {\n            return null;\n        } else if (loadingRemoteURL) {\n            return remoteLoadingView ?\n                remoteLoadingView(this.props, this.state) :\n                (\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <ActivityIndicator />\n                    </View>\n                );\n        } else if (errorLoadingRemoteURL) {\n            return remoteErrorView ?\n                remoteErrorView(this.props, this.state) :\n                (\n                    <View style={{ flex: 1, alignItems: 'center' }}>\n                        <Text allowFontScaling={allowFontScaling} style={{ fontStyle: 'italic', fontSize: 16 }}>Could not load { this.props.uri }</Text>\n                    </View>\n                );\n        }\n\n        return customWrapper ? customWrapper(RNNodes) : (\n            <View style={this.props.containerStyle || {}}>\n                { RNNodes }\n            </View>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}