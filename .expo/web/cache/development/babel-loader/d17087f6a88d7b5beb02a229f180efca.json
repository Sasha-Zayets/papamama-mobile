{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/alex/workspace/papamama/src/components/auth/OrderCard.js\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Context as AppSettingsContext } from \"../../context/AppSettingsContext\";\nimport { Context as AuthContext } from \"../../context/AuthContext\";\nimport { Block, IntelligentImage, Spacer, VerticalSpacer } from \"../shared\";\nimport { RateOrderModal } from \"../modals\";\nimport { createIconSetFromIcoMoon } from \"@expo/vector-icons\";\nimport icoMoonConfig from \"../../../selection.json\";\nvar IcoMoonIcon = createIconSetFromIcoMoon(icoMoonConfig, 'icomoon', 'icomoon.ttf');\nimport StarRating from 'react-native-star-rating';\nimport moment from \"moment\";\nimport 'moment/locale/uk';\nimport 'moment/locale/ru';\nimport translator from \"../../translator/translator\";\nimport { prepareLanguageToHttpRequest, getUniqueId } from \"../../helpers/helpers\";\nimport styles from \"../../styles/components/auth/order-card\";\nimport { app_styles } from \"../../styles/app_styles\";\n\nvar OrderCard = function OrderCard(_ref) {\n  var order = _ref.order,\n      navigation = _ref.navigation,\n      updateRatingCallback = _ref.updateRatingCallback;\n\n  var _useContext = useContext(AppSettingsContext),\n      _useContext$state = _useContext.state,\n      language = _useContext$state.language,\n      scales = _useContext$state.scales;\n\n  var _useContext2 = useContext(AuthContext),\n      ordersStatuses = _useContext2.state.ordersStatuses;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showRateOrderModal = _useState2[0],\n      setShowRateOrderModal = _useState2[1];\n\n  useEffect(function () {}, []);\n\n  var transformUnixTime = function transformUnixTime(time) {\n    var lang = prepareLanguageToHttpRequest(language);\n    moment.locale(lang);\n    return moment(parseInt(time) * 1000).format('DD MMMM YYYY');\n  };\n\n  var defineOrderStatusColor = function defineOrderStatusColor(name) {\n    var lang = prepareLanguageToHttpRequest(language);\n    var needle = ordersStatuses[lang];\n    var status = needle.find(function (item) {\n      return item.name.toLowerCase() === name.toLowerCase();\n    });\n    return status ? status.color : app_styles(scales).colors.text.primary;\n  };\n\n  var generateProductCard = function generateProductCard(product) {\n    var img = product['product'] && product['product']['image_preview'] ? product['product']['image_preview'] : null;\n    if (!img) return null;\n    return React.createElement(View, {\n      style: styles(scales).product_thumbnail_container,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }\n    }, React.createElement(Image, {\n      source: {\n        uri: img\n      },\n      style: styles(scales).product_thumbnail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }));\n  };\n\n  var isRated = function isRated() {\n    return parseInt(order.rating) > 0;\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: styles(scales).container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles(scales).line,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 17\n    }\n  }, React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, React.createElement(Spacer, {\n    spaceHeight: 2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 25\n    }\n  }), React.createElement(View, {\n    style: app_styles(scales).row_start,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, React.createElement(Text, {\n    style: styles(scales).text,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, transformUnixTime(order.time)), React.createElement(Text, {\n    style: styles(scales).slash,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 29\n    }\n  }, \" / \"), React.createElement(Text, {\n    style: [styles(scales).text, {\n      color: defineOrderStatusColor(order.status_text)\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, translator.translate(language, order.status_text)))), React.createElement(TouchableOpacity, {\n    style: styles(scales).button,\n    onPress: function onPress() {\n      return navigation.navigate('OrderDetails', {\n        order_id: order.order_id\n      });\n    },\n    activeOpacity: .7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, React.createElement(IcoMoonIcon, {\n    name: \"arrow-right\",\n    color: app_styles(scales).colors.text.primary,\n    size: Math.round(scales.widthScale * 14),\n    style: {\n      top: Math.round(scales.heightScale * 6)\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 25\n    }\n  }))), React.createElement(Spacer, {\n    spaceHeight: 14,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }), React.createElement(FlatList, {\n    contentContainerStyle: {\n      paddingRight: Math.round(scales.widthScale * 16)\n    },\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    keyExtractor: function keyExtractor(product) {\n      return \"key\" + getUniqueId();\n    },\n    data: order.order_products,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return generateProductCard(item);\n    },\n    ItemSeparatorComponent: function ItemSeparatorComponent() {\n      return React.createElement(VerticalSpacer, {\n        spaceWidth: 9,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 51\n        }\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  })), isRated() ? React.createElement(View, {\n    style: [app_styles(scales).row_between, {\n      paddingHorizontal: Math.round(scales.widthScale * 16),\n      marginTop: Math.round(scales.heightScale * 10)\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }, React.createElement(View, {\n    style: [styles(scales).review_container, {\n      backgroundColor: null\n    }],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 29\n    }\n  }, React.createElement(View, {\n    style: app_styles(scales).row_start,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    style: styles(scales).review_subtitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 37\n    }\n  }, translator.translate(language, \"Ваша оцінка\"), \": \"), React.createElement(VerticalSpacer, {\n    spaceWidth: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }), React.createElement(StarRating, {\n    activeOpacity: .8,\n    disabled: true,\n    buttonStyle: {\n      margin: Math.round(scales.widthScale * 2),\n      padding: 0\n    },\n    containerStyle: {\n      alignSelf: 'flex-start'\n    },\n    starSize: Math.round(scales.widthScale * 17),\n    maxStars: 5,\n    rating: parseInt(order.rating),\n    emptyStarColor: \"#8c8c8e\",\n    fullStarColor: \"#FFC837\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 37\n    }\n  })), React.createElement(TouchableOpacity, {\n    activeOpacity: .8,\n    onPress: function onPress() {\n      return setShowRateOrderModal(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }, React.createElement(Text, {\n    style: styles(scales).edit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 37\n    }\n  }, translator.translate(language, \"Редагувати\"))))) : order.status === 4 ? React.createElement(Block, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 33\n    }\n  }, React.createElement(Spacer, {\n    spaceHeight: 10,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 37\n    }\n  }), React.createElement(TouchableOpacity, {\n    activeOpacity: .8,\n    onPress: function onPress() {\n      return setShowRateOrderModal(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, React.createElement(Text, {\n    style: styles(scales).edit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 41\n    }\n  }, translator.translate(language, \"Оцінити замовлення\")))) : null, React.createElement(RateOrderModal, {\n    isOpened: showRateOrderModal,\n    closeCallback: function closeCallback() {\n      return setShowRateOrderModal(false);\n    },\n    order: order,\n    updateOrderRating: updateRatingCallback,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default OrderCard;","map":{"version":3,"sources":["/home/alex/workspace/papamama/src/components/auth/OrderCard.js"],"names":["React","useContext","useEffect","useState","Context","AppSettingsContext","AuthContext","Block","IntelligentImage","Spacer","VerticalSpacer","RateOrderModal","createIconSetFromIcoMoon","icoMoonConfig","IcoMoonIcon","StarRating","moment","translator","prepareLanguageToHttpRequest","getUniqueId","styles","app_styles","OrderCard","order","navigation","updateRatingCallback","state","language","scales","ordersStatuses","showRateOrderModal","setShowRateOrderModal","transformUnixTime","time","lang","locale","parseInt","format","defineOrderStatusColor","name","needle","status","find","item","toLowerCase","color","colors","text","primary","generateProductCard","product","img","product_thumbnail_container","uri","product_thumbnail","isRated","rating","container","line","row_start","slash","status_text","translate","button","navigate","order_id","Math","round","widthScale","top","heightScale","paddingRight","order_products","row_between","paddingHorizontal","marginTop","review_container","backgroundColor","review_subtitle","margin","padding","alignSelf","edit"],"mappings":"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","sourcesContent":["//----IMPORTS----//\n//React\nimport React, {useContext, useEffect, useState} from 'react';\n//React native\nimport {View, Text, TouchableOpacity, FlatList, Image} from 'react-native';\n//Context\nimport {Context as AppSettingsContext} from \"../../context/AppSettingsContext\";\nimport {Context as AuthContext} from \"../../context/AuthContext\";\n//Components\nimport {Block, IntelligentImage, Spacer, VerticalSpacer} from \"../shared\";\nimport {RateOrderModal} from \"../modals\";\n//React-native-vector-icons package\nimport {createIconSetFromIcoMoon} from 'react-native-vector-icons';\nimport icoMoonConfig from '../../../selection.json';\n\nconst IcoMoonIcon = createIconSetFromIcoMoon(icoMoonConfig, 'icomoon', 'icomoon.ttf');\n//Rating\nimport StarRating from 'react-native-star-rating';\n//Moment\nimport moment from \"moment\";\nimport 'moment/locale/uk';\nimport 'moment/locale/ru';\n//Localization\nimport translator from \"../../translator/translator\";\n//Helpers\nimport {prepareLanguageToHttpRequest, getUniqueId} from \"../../helpers/helpers\";\n//Styles\nimport styles from '../../styles/components/auth/order-card';\nimport {app_styles} from '../../styles/app_styles';\n\n\n//----COMPONENT----//\nconst OrderCard = ({order, navigation, updateRatingCallback}) => {\n    //Data and State\n    const {state: {language, scales}} = useContext(AppSettingsContext);\n    const {state: {ordersStatuses}} = useContext(AuthContext);\n    const [showRateOrderModal, setShowRateOrderModal] = useState(false);\n\n\n    //Hooks and Methods\n    useEffect(() => {\n\n    }, []);\n\n\n    const transformUnixTime = (time) => {\n        const lang = prepareLanguageToHttpRequest(language);\n        moment.locale(lang);\n        return moment(parseInt(time) * 1000).format('DD MMMM YYYY');\n    }\n\n    const defineOrderStatusColor = (name) => {\n        let lang = prepareLanguageToHttpRequest(language);\n        let needle = ordersStatuses[lang];\n        let status = needle.find(item => item.name.toLowerCase() === name.toLowerCase());\n        return status ? status.color : app_styles(scales).colors.text.primary;\n    }\n\n\n    const generateProductCard = (product) => {\n        let img = product['product'] && product['product']['image_preview'] ? product['product']['image_preview'] : null;\n\n        if (!img) return null;\n\n        return (\n            <View style={styles(scales).product_thumbnail_container}>\n                <Image source={{uri: img}} style={styles(scales).product_thumbnail} />\n            </View>\n        );\n    }\n\n\n    const isRated = () => {\n        return parseInt(order.rating) > 0;\n    }\n\n\n\n    //Template\n    return (\n        <>\n            <View style={styles(scales).container}>\n                <View style={styles(scales).line}>\n                    <View>\n                        <Spacer spaceHeight={2}/>\n                        <View style={app_styles(scales).row_start}>\n                            <Text style={styles(scales).text}>{transformUnixTime(order.time)}</Text>\n                            <Text style={styles(scales).slash}> / </Text>\n                            <Text\n                                style={[styles(scales).text, {color: defineOrderStatusColor(order.status_text)}]}>{translator.translate(language, order.status_text)}</Text>\n                        </View>\n                    </View>\n                    <TouchableOpacity style={styles(scales).button}\n                                      onPress={() => navigation.navigate('OrderDetails', {order_id: order.order_id})}\n                                      activeOpacity={.7}>\n                        <IcoMoonIcon\n                            name=\"arrow-right\"\n                            color={app_styles(scales).colors.text.primary}\n                            size={Math.round(scales.widthScale * 14)}\n                            style={{top: Math.round(scales.heightScale * 6)}}\n                        />\n                    </TouchableOpacity>\n                </View>\n                <Spacer spaceHeight={14}/>\n                <FlatList\n                    contentContainerStyle={{paddingRight: Math.round(scales.widthScale * 16)}}\n                    horizontal\n                    showsHorizontalScrollIndicator={false}\n                    keyExtractor={product => \"key\" + getUniqueId()}\n                    data={order.order_products}\n                    renderItem={({item}) => generateProductCard(item)}\n                    ItemSeparatorComponent={() => <VerticalSpacer spaceWidth={9}/>}\n                />\n            </View>\n\n            {/* Order rating */}\n            {\n                isRated()\n                    ? (\n                        <View style={[app_styles(scales).row_between, {\n                            paddingHorizontal: Math.round(scales.widthScale * 16),\n                            marginTop: Math.round(scales.heightScale * 10)\n                        }]}>\n                            <View style={[styles(scales).review_container, {backgroundColor: null}]}>\n                                <View style={app_styles(scales).row_start}>\n                                    <Text\n                                        style={styles(scales).review_subtitle}>{translator.translate(language, \"Ваша оцінка\")}: </Text>\n                                    <VerticalSpacer spaceWidth={10}/>\n                                    <StarRating\n                                        activeOpacity={.8}\n                                        disabled={true}\n                                        buttonStyle={{margin: Math.round(scales.widthScale * 2), padding: 0}}\n                                        containerStyle={{alignSelf: 'flex-start'}}\n                                        starSize={Math.round(scales.widthScale * 17)}\n                                        maxStars={5}\n                                        rating={parseInt(order.rating)}\n                                        emptyStarColor=\"#8c8c8e\"\n                                        fullStarColor=\"#FFC837\"\n                                    />\n                                </View>\n                                <TouchableOpacity activeOpacity={.8} onPress={() => setShowRateOrderModal(true)}>\n                                    <Text style={styles(scales).edit}>{translator.translate(language, \"Редагувати\")}</Text>\n                                </TouchableOpacity>\n                            </View>\n                        </View>\n                    )\n                    : (\n                        order.status === 4\n                            ? (\n                                <Block>\n                                    <Spacer spaceHeight={10}/>\n                                    <TouchableOpacity activeOpacity={.8} onPress={() => setShowRateOrderModal(true)}>\n                                        <Text\n                                            style={styles(scales).edit}>{translator.translate(language, \"Оцінити замовлення\")}</Text>\n                                    </TouchableOpacity>\n                                </Block>\n                            )\n                            : null\n                    )\n            }\n\n            {/* Modal */}\n            <RateOrderModal\n                isOpened={showRateOrderModal}\n                closeCallback={() => setShowRateOrderModal(false)}\n                order={order}\n                updateOrderRating={updateRatingCallback}\n            />\n        </>\n    );\n}\n\n\n//----EXPORT----//\nexport default OrderCard;"]},"metadata":{},"sourceType":"module"}